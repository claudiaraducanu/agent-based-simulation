to set-up-luggage-infra  
  set feeder-belt-generators (patches with [
    ((pxcor = 14) and (pycor = 8)) or
    ((pxcor = 14) and (pycor = 5)) or
    ((pxcor = 14) and (pycor = 6)) or
    ((pxcor = 14) and (pycor = -1)) or
    ((pxcor = 14) and (pycor = 0)) or
    ((pxcor = 14) and (pycor = -3))
  ])
end

to set-up-delivery-infra
  set delivery-nodes (nodes-on patches with [
    ((pxcor <= 6) and (pxcor >= -23) and (pycor = 9)) or
    ((pxcor <= 6) and (pxcor >= -23) and (pycor = 6)) or
    ((pxcor <= 6) and (pxcor >= -23) and (pycor = -1)) or
    ((pxcor <= 6) and (pxcor >= -23) and (pycor = -4))
  ])
end

to luggage-setup
  set age 0
  set destination one-of delivery-nodes
  set heading 270
  set utility-offer 0
  
  set color one-of base-colors
  set shape "box"
  set size 0.5
  ask destination [
    set hidden? false
    set color [color] of myself
  ]                    
end

to luggage-go
  luggage-age
  luggage-move
  luggage-suicide
end


to generate-luggage-service
  if (random-float 1) <= ( (1) / (6 * luggage-time) ) [
    ask one-of feeder-belt-generators [sprout-luggages 1 [ luggage-setup ] ] 
  ]
end

to luggage-age
  set age ( age + 1 )
  set label age 
end

to luggage-move
   if xcor > 10 [
     if not any? luggages-on patch-ahead 1 [
       fd 1
     ]
   ]
end

to luggage-calculate-utility-offer
  if (utility-offer != -1) and ( xcor = 10 )[
    set utility-offer luggage-KL1 * exp ( luggage-KL2 * age )
  ]
end

to luggage-suicide
  if member? destination nodes-here[
    ask nodes-here [set hidden? true]
    die
  ]
end