to agv-setup
  set shape "lander"
  set color 8
  set label-color black
  
  
  set battery-life 500
  set assigned-to-luggage false
  set currently-carrying false
  set mode "r"
end
 
to agv-go
  dead-agv-set-battery-drained-on
  alive-agv-set-battery-drained-on
  move-dead-agv-to-charging-spot
  charge-agv
  
  ;;to remove:
  ask-my-current-node-to-set-my-next-node
  face next-node
  move-to next-node
  if current-luggage-set [ ask current-luggage [move-to myself]]
  set label battery-life
  if battery-life < 60 [
    set temp-target-node target-node
    set target-node one-of charge-nodes]
  
end
 
to dead-agv-set-battery-drained-on
  if (battery-life < 1) and (battery-drained-on = 0) [
    set battery-drained-on tick
  ]
end
 
to alive-agv-set-battery-drained-on
  if battery-life > 0 [
    set battery-drained-on 0
  ]
end
 
to move-dead-agv-to-charging-spot
  if (battery-life < 1) and (any? charge-nodes with [available = true and reserved = false]) and (battery-drained-on > tick+30) [
    move-to one-of charge-nodes with [available = true and reserved = false]
    set battery-drained-on 0
  ]
end
 
to charge-agv
  if any? charge-nodes-here and battery-life < 476 [
     set battery-life (battery-life + 25)
  ]
end
 
 
 
 
 
commit:b2340f
WIP on master: Auto stash before merge of "master" and "origin/master"
